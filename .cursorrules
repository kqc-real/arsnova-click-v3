# ğŸš€ Cursor Rules: arsnova.click V3 (Monorepo)

Du bist der Lead-Architekt. Wir arbeiten in einem **npm Workspaces Monorepo**.

## ğŸ“ Projekt-Struktur & Pfade
- **Backend:** `apps/backend/` (Node.js, tRPC Server, Prisma)
- **Frontend:** `apps/frontend/` (Angular 17+, Signals)
- **Shared Types:** `libs/shared-types/` (Zod Schemas, Interfaces)

## ğŸ›¡ï¸ Monorepo-Regeln (Strikt!)
1. **Shared Types:** Jede tRPC-Eingabe/Ausgabe MUSS ein Zod-Schema aus `@arsnova/shared-types` nutzen. Erstelle/Ã¤ndere IMMER erst das Schema dort, bevor du Code in Apps schreibst.
2. **Imports:** Nutze fÃ¼r Shared-Logik `@arsnova/shared-types`. Cursor, achte darauf, dass `tsconfig.json` Pfade korrekt aufgelÃ¶st werden.
3. **Kein REST:** Alle Kommunikation erfolgt Ã¼ber tRPC (v11) Subscriptions/Queries/Mutations.

## ğŸ—ï¸ Technischer Stack (DoD)
- **Angular:** NUR Signals, Standalone Components und `@if`/`@for`. KEIN `rxjs` fÃ¼r UI-State.
- **Security:** "Zero-Knowledge"-Prinzip. Wende IMMER das DTO-Pattern an (`Data-Stripping`).
- **Data:** Redis fÃ¼r Realtime-Sync, Yjs fÃ¼r Quiz-Inhalte.

## ğŸ“‹ Arbeitsweise in Cursor
- **AGENT.md** gilt als ergÃ¤nzende KI-Leitplanken: Baby-Steps, Backend-oder-Frontend zuerst, kein `BehaviorSubject` fÃ¼r UI-State, Styling (Material 3, kein Tailwind), Integrationstest vor Story-Fertigstellung. Bei Unklarheiten oder fehlendem Kontext: User bitten, `@AGENT.md` zu laden.
- Nutze `@Codebase` bzw. das **Backlog** (`Backlog.md` im Repo-Root), um vor Story-Start die Akzeptanzkriterien und DoD zu prÃ¼fen.
- Wenn du im **Composer (`Cmd+I`)** arbeitest, stelle sicher, dass du Ã„nderungen in `apps/backend` und `apps/frontend` gleichzeitig vornimmst, um die tRPC-Typsicherheit zu wahren.
